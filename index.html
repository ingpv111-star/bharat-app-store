<!DOCTYPE html>
<html>
<head>
  <title>Bharat App Store</title>
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>

  <style>
    body{
      font-family: Arial;
      text-align:center;
      background:#f5f5f5;
      padding-top:50px;
    }
    .card{
      background:white;
      padding:30px;
      border-radius:10px;
      width:300px;
      margin:auto;
      box-shadow:0 0 10px rgba(0,0,0,0.1);
    }
    button{
      background:#3399cc;
      color:white;
      border:none;
      padding:10px 20px;
      font-size:16px;
      border-radius:5px;
      cursor:pointer;
    }
    #installBtn{
      display:none;
      margin-top:15px;
      background:green;
    }
  </style>
</head>
<body>

<div class="card">
  <h2>Premium App</h2>
  <p>Price: â‚¹10</p>
  <button onclick="payNow()">Pay & Unlock</button>
  <button id="installBtn">Install Now</button>
</div>

<script type="module">

// ðŸ”¥ PASTE YOUR FIREBASE CONFIG HERE
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "YOUR_FIREBASE_API_KEY",
  authDomain: "YOUR_DOMAIN",
  projectId: "YOUR_PROJECT_ID",
  storageBucket: "YOUR_BUCKET",
  messagingSenderId: "YOUR_ID",
  appId: "YOUR_APP_ID"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.payNow = function () {

  var options = {
    "key": "rzp_test_SHHD34IXs9hUPc",
    "amount": "1000", // 10 rupees
    "currency": "INR",
    "name": "Bharat App Store",
    "description": "Premium App Unlock",
    "handler": async function (response){

      alert("Payment Successful!");

      // ðŸ”¥ Save in Firebase
      await addDoc(collection(db, "payments"), {
        paymentId: response.razorpay_payment_id,
        amount: 10,
        date: new Date()
      });

      // ðŸ”¥ Unlock Install
      document.getElementById("installBtn").style.display = "inline-block";
    },
    "prefill": {
      "name": "Test User",
      "email": "test@example.com"
    },
    "theme": {
      "color": "#3399cc"
    }
  };

  var rzp1 = new Razorpay(options);
  rzp1.open();
};

</script>

</body>
</html>
